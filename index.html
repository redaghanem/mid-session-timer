<!doctype html><html lang="en"><head><meta charset="utf-8"/><title>Mid Session Test – Live Timer</title><meta name="viewport" content="width=device-width, initial-scale=1"/><style>:root{--accent:#e0a400;--ok:#0c9f2e;--muted:#6b7280;--yellow:#fadd29}*{box-sizing:border-box}
body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;margin:0;background:#fafafa;color:#111;min-height:100vh;display:flex;flex-direction:column}
header{text-align:center;padding:24px 16px}
h1{margin:0 0 4px;font-size:clamp(22px,3vw,36px)}
h2{margin:0;font-weight:500;color:#333}.bar{height:10px;background:var(--yellow);margin-top:16px}.card{background:#fff;max-width:980px;width:100%;margin:0 auto 28px;border:2px solid var(--accent);border-radius:10px;overflow:hidden;box-shadow:0 2px 12px rgba(0,0,0,.05)}.controls{display:flex;gap:12px;align-items:center;padding:16px;flex-wrap:wrap;border-bottom:2px solid var(--accent)}.controls label{font-weight:600}.controls input,.controls select{font-size:16px;padding:8px 10px;border:1px solid #ddd;border-radius:8px}.controls button{padding:10px 14px;font-size:16px;border-radius:8px;border:0;color:#111;background:var(--yellow);cursor:pointer}.controls button:hover{filter:brightness(.95)}
table{width:100%;border-collapse:collapse}
thead th{text-align:left;background:#fff7d1;border-bottom:2px solid var(--accent);padding:12px 16px;font-size:15px}
tbody td{padding:16px;border-bottom:1px solid #f1f1f1;font-size:clamp(14px,2vw,18px);transition:background.2s,color.2s}
tbody tr:last-child td{border-bottom:0}.event{font-weight:600}.time{text-align:right;font-variant-numeric:tabular-nums}.count{text-align:right;font-variant-numeric:tabular-nums;color:#111}.done{color:var(--ok);font-weight:700}.muted{color:var(--muted)}.tick{text-align:center}.row-muted{opacity:.35}.row-current td{background:#41c888}.row-past td{color:#666}.footer{margin-top:auto;background:var(--yellow)}.footer-inner{max-width:1100px;margin:0 auto;display:flex;align-items:center;justify-content:flex-end;padding:10px 16px}.footer img{height:42px}.pill{background:#111;color:#fff;border-radius:999px;padding:4px 10px;font-size:12px}.note{padding:10px 16px;color:#666;font-size:13px}</style></head><body><header><h1>ZEIT1102 – Introduction to Programming</h1><h2>Mid Session Test – Live Timer</h2><div class="bar"></div></header><div class="card"><div class="controls"><label for="start">Exam start time:</label><input id="start" type="text" placeholder="e.g., 10, 13:10, 1:10 PM"/><label for="date">Date:</label><input id="date" type="date"/><!--<label for="tz" title="Uses your system time zone by default">Time zone:</label>--><span id="tz" class="pill"></span><button id="apply">Apply</button><button id="fullscreen" title="Fullscreen">Full Screen</button></div><table><thead><tr><th>Event</th><th class="time">Time</th><th class="count">Countdown</th><th class="tick">Status</th></tr></thead><tbody id="rows"><!-- rows injected by JS --></tbody></table><div class="note">Only the current row shows a live countdown.Past/future rows remain visible but dimmed.A short chime plays when an event completes.</div></div><footer class="footer"><div class="footer-inner"><img alt="UNSW Canberra" src="https://www.unsw.edu.au/content/dam/images/graphics/icons/ico_unsw-canberra-logo.svg"><div style="flex:1"></div><div class="col-md-6 text-center text-md-end" style="font-size: 12px;">© Designed By<a href="https://www.linkedin.com/in/drredaghanem" target="_blank"
style="color: inherit; text-decoration: none; font-weight: 600;">Reda Ghanem</a></div></div></footer><script>const MILESTONES=[{label:"Test Starts",minutes:0},{label:"50 Minutes Left",minutes:50},{label:"10 Minutes Left",minutes:90},{label:"Test Ends / Start Uploading",minutes:100},{label:"Finish Uploading / End Session",minutes:110}];let audioCtx=null;function initAudio(){if(!audioCtx){audioCtx=new(window.AudioContext||window.webkitAudioContext)()}}
function playChime(){if(!audioCtx)return;const tones=[{freq:440,type:"sine"},{freq:440,type:"sine"},{freq:440,type:"sine"},{freq:440,type:"sine"},{freq:554.37,type:"triangle"},{freq:659.25,type:"sawtooth"},{freq:880,type:"sine"}];const baseTime=audioCtx.currentTime;tones.forEach((tone,i)=>{const o=audioCtx.createOscillator();const g=audioCtx.createGain();o.type=tone.type;o.frequency.value=tone.freq;g.gain.value=0.0001;o.connect(g);g.connect(audioCtx.destination);const start=baseTime+i*0.5;const end=start+0.45;g.gain.exponentialRampToValueAtTime(0.2,start+0.05);g.gain.exponentialRampToValueAtTime(0.0001,end);o.start(start);o.stop(end)})}
const pad=n=>String(n).padStart(2,'0');function formatTime(d){let h=d.getHours();const m=pad(d.getMinutes());const ampm=h>=12?'PM':'AM';h=h%12;if(h===0)h=12;return `${h}:${m} ${ampm}`}
function formatDuration(ms){const neg=ms<0;if(neg)ms=-ms;const s=Math.floor(ms/1000);const hh=Math.floor(s/3600);const mm=Math.floor((s%3600)/60);const ss=s%60;const body=`${pad(hh)}:${pad(mm)}:${pad(ss)}`;return neg?`-${body}`:body}
function parseStartTime(str,date){if(!str)return null;const raw=str.trim().toLowerCase();const m=raw.match(/^(\d{1,2})(?::?(\d{2}))?\s*(am|pm)?$/i);if(!m)return null;let[,hhStr,mmStr,ap]=m;let hh=parseInt(hhStr,10);let mm=mmStr?parseInt(mmStr,10):0;if(ap){ap=ap.toLowerCase();if(hh===12)hh=0;if(ap==='pm')hh+=12}
if(hh<0||hh>23||mm<0||mm>59)return null;return new Date(date.getFullYear(),date.getMonth(),date.getDate(),hh,mm,0,0)}
function renderRows(startDate){const tbody=document.getElementById('rows');tbody.innerHTML='';MILESTONES.forEach((m,idx)=>{const t=new Date(startDate.getTime()+m.minutes*60*1000);const tr=document.createElement('tr');tr.dataset.timestamp=t.toISOString();tr.dataset.index=idx;tr.className='row-future row-muted';const tdEvent=document.createElement('td');tdEvent.textContent=m.label;tdEvent.className='event';const tdTime=document.createElement('td');tdTime.textContent=formatTime(t);tdTime.className='time';const tdCount=document.createElement('td');tdCount.className='count muted';tdCount.textContent='—';const tdTick=document.createElement('td');tdTick.className='tick';tdTick.textContent='';tr.appendChild(tdEvent);tr.appendChild(tdTime);tr.appendChild(tdCount);tr.appendChild(tdTick);tbody.appendChild(tr)});tickCountdowns()}
function getCurrentRowIndex(){const rows=Array.from(document.querySelectorAll('#rows tr'));const now=new Date();for(let i=0;i<rows.length;i++){const t=new Date(rows[i].dataset.timestamp);const diff=t.getTime()-now.getTime();if(diff>0)return i}
return-1}
let lastCompletedIndex=-1;function tickCountdowns(){const rows=Array.from(document.querySelectorAll('#rows tr'));if(!rows.length)return;const now=new Date();const currentIdx=getCurrentRowIndex();rows.forEach((tr,idx)=>{const t=new Date(tr.dataset.timestamp);const diff=t.getTime()-now.getTime();const tdCount=tr.children[2];const tdTick=tr.children[3];tr.classList.remove('row-current','row-past','row-future','row-muted');if(diff<=0){tr.classList.add('row-past');tdCount.textContent='Done';tdCount.classList.remove('muted');tdCount.classList.add('done');tdTick.textContent='✓';if(idx>lastCompletedIndex){lastCompletedIndex=idx;playChime()}}else if(idx===currentIdx){tr.classList.add('row-current');tdCount.textContent=formatDuration(diff);tdCount.classList.remove('done');tdCount.classList.remove('muted');tdTick.textContent=''}else{tr.classList.add('row-future','row-muted');tdCount.textContent='—';tdCount.classList.add('muted');tdCount.classList.remove('done');tdTick.textContent=''}})}
const startInput=document.getElementById('start');const dateInput=document.getElementById('date');const tzSpan=document.getElementById('tz');tzSpan.textContent=Intl.DateTimeFormat().resolvedOptions().timeZone||'Local time';const todayISO=new Date().toISOString().slice(0,10);dateInput.value=todayISO;document.getElementById('apply').addEventListener('click',()=>{initAudio();const dateVal=dateInput.value||todayISO;const baseDate=new Date(dateVal+'T00:00:00');const start=parseStartTime(startInput.value,baseDate);if(!start||isNaN(start.getTime())){alert('Please enter a valid time like 10, 13:10, 1:10 PM.');return}
lastCompletedIndex=-1;renderRows(start);localStorage.setItem('examTimer.start',startInput.value);localStorage.setItem('examTimer.date',dateVal)});document.getElementById('fullscreen').addEventListener('click',()=>{const el=document.documentElement;if(!document.fullscreenElement)el.requestFullscreen?.();else document.exitFullscreen?.()});const savedStart=localStorage.getItem('examTimer.start');const savedDate=localStorage.getItem('examTimer.date');if(savedStart)startInput.value=savedStart;if(savedDate)dateInput.value=savedDate;setInterval(tickCountdowns,250);(function autoRender(){if(!startInput.value)return;const baseDate=new Date((dateInput.value||todayISO)+'T00:00:00');const start=parseStartTime(startInput.value,baseDate);if(start&&!isNaN(start.getTime()))renderRows(start);})();</script></body></html>
